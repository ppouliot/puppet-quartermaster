# Puppet Managed
# File <%= @title %>
{
  "id": "install-<%= @coreos_channel %>-reboot",
  "name": "Install CoreOS Container Linux <%= @coreos_channel %> and Reboot",
  "boot": {
    "kernel": "/assets/coreos/<%= @coreos_version %>/coreos_production_pxe.vmlinuz",
    "initrd": ["/assets/coreos/<%= @coreos_version %>/coreos_production_pxe_image.cpio.gz"],
    "args": [
      "initrd=coreos_production_pxe_image.cpio.gz",
      "coreos.config.url=http://<%= @fqdn %>:8080/ignition?uuid=${uuid}&mac=${mac:hexhyp}",
      "coreos.first_boot=yes",
      "console=tty0",
      "console=ttyS0",
      "coreos.autologin"
    ]
  },
  "ignition_id": "install-reboot.yaml"
}
